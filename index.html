<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding (Video Only)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* --- 1. CONFIG & RESET --- */
        :root {
            --font-main: 'Poppins', sans-serif;
            --nav-glass: rgba(0, 0, 0, 0.6); /* Lebih gelap agar icon putih kontras */
            --c-active: #fff;
            --c-inactive: rgba(255, 255, 255, 0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #000;
            font-family: var(--font-main);
            overflow-x: hidden;
        }

        /* --- 2. LAYOUT SYSTEM --- */
        #visual-layer {
            position: fixed; inset: 0; z-index: 1;
            pointer-events: none;
        }

        /* Scroll Control */
        #scroll-track { position: relative; z-index: 10; }
        .scroll-trigger { height: 100vh; scroll-snap-align: start; } /* Tinggi per section */

        /* --- 3. VIDEO COMPONENT --- */
        .video-wrapper { position: absolute; inset: 0; z-index: -2; background: #000; }
        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.2); z-index: -1; } /* Overlay tipis */
        
        .bg-video {
            position: absolute; inset: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0; transition: opacity 1.0s ease-in-out;
        }
        .bg-video.active { opacity: 1; }

        /* --- 4. NAVIGATION (ICON MODE) --- */
        .bottom-nav {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 100;
            background: var(--nav-glass); backdrop-filter: blur(15px);
            padding: 10px 20px; border-radius: 50px; 
            display: flex; gap: 20px; align-items: center;
            border: 1px solid rgba(255,255,255,0.1); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .nav-item {
            background: transparent; border: none; 
            color: var(--c-inactive);
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item svg {
            width: 24px; height: 24px;
            stroke: currentColor; stroke-width: 2; fill: none;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* State Active / Hover */
        .nav-item:hover { color: #fff; }
        
        .nav-item.active { color: var(--c-active); }
        .nav-item.active svg { 
            transform: scale(1.2); 
            stroke-width: 2.5;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.5));
        }

        /* Indikator titik kecil di bawah icon aktif (opsional) */
        .nav-item.active::after {
            content: ''; position: absolute; bottom: -8px; 
            width: 4px; height: 4px; background: #fff; border-radius: 50%;
        }

        @media (max-width: 768px) {
            .bottom-nav { 
                width: 90%; justify-content: space-around; gap: 0; 
                padding: 12px 10px; bottom: 20px;
            }
        }
    </style>
</head>
<body>

    <main id="visual-layer">
        <div class="video-wrapper">
            <video class="bg-video active" src="1.mp4" muted loop playsinline preload="auto"></video>
            <video class="bg-video" src="2.mp4" muted loop playsinline preload="none"></video>
            <video class="bg-video" src="3.mp4" muted loop playsinline preload="none"></video>
            <video class="bg-video" src="4.mp4" muted loop playsinline preload="none"></video>
            <video class="bg-video" src="5.mp4" muted loop playsinline preload="none"></video>
            <video class="bg-video" src="6.mp4" muted loop playsinline preload="none"></video>
            <video class="bg-video" src="7.mp4" muted loop playsinline preload="none"></video>
            <div class="overlay"></div>
        </div>
    </main>

    <div id="scroll-track">
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div class="scroll-trigger"></div>
        <div style="height: 50vh;"></div> 
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" aria-label="Sampul">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </button>
        
        <button class="nav-item" aria-label="Mempelai">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
        </button>
        
        <button class="nav-item" aria-label="Acara">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
        </button>

        <button class="nav-item" aria-label="Lokasi">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
        </button>

        <button class="nav-item" aria-label="Galeri">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
        </button>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const triggers = document.querySelectorAll('.scroll-trigger');
            const videos   = document.querySelectorAll('.bg-video');
            const navItems = document.querySelectorAll('.nav-item');

            const activateSection = (index) => {
                // 1. Handle Video (Ada 7 Video)
                videos.forEach((vid, i) => {
                    if (i === index) {
                        vid.classList.add('active');
                        vid.play();
                    } else {
                        vid.classList.remove('active');
                        // Optional: vid.pause() untuk menghemat resource
                    }
                });

                // 2. Handle Navigation (Hanya ada 5 Menu)
                // Logic: 
                // Index 0 -> Menu 0
                // Index 1 -> Menu 1
                // ...
                // Index 4 -> Menu 4
                // Index 5 & 6 (Video ke 6 & 7) -> Tetap sorot Menu 4 (Menu terakhir) atau Custom
                
                let navIndex = index;
                if (index >= navItems.length) {
                    navIndex = navItems.length - 1; // Jika scroll ke 6/7, sorot menu terakhir
                }

                navItems.forEach((btn, i) => {
                    if (i === navIndex) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const index = Array.from(triggers).indexOf(entry.target);
                        if (index !== -1) activateSection(index);
                    }
                });
            }, { threshold: 0.5 });

            triggers.forEach(trigger => observer.observe(trigger));

            // Click Handler untuk Menu
            // Karena jumlah menu < jumlah section, kita map menu ke section spesifik
            // Menu 1-4 ke Section 1-4, Menu 5 ke Section 5 (Section 6 & 7 hanya via scroll)
            navItems.forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    // Pastikan trigger[index] ada
                    if(triggers[index]) {
                        triggers[index].scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Autoplay First Video
            if(videos[0]) videos[0].play().catch(e => console.log("Autoplay blocked"));
        });
    </script>
</body>
</html>